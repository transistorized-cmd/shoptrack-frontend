import{Chart as t,BubbleController as e,DoughnutController as a,LineController as s,PieController as n,PolarAreaController as r,RadarController as o,ScatterController as l,BarController as u}from"./chart.js-Cq8dct2g.js";import{d as i,N as d,O as c,r as p,x as y,K as f,P as b,Q as g,S as v,U as m,j}from"./chunk-D50-beEz.js";const h={data:{type:Object,required:!0},options:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]},datasetIdKey:{type:String,default:"label"},updateMode:{type:String,default:void 0}},O={ariaLabel:{type:String},ariaDescribedby:{type:String}},x={type:{type:String,required:!0},destroyDelay:{type:Number,default:0},...h,...O},D="2"===v[0]?(t,e)=>Object.assign(t,{attrs:e}):(t,e)=>Object.assign(t,e);function E(t){return m(t)?g(t):t}function S(t,e){t.labels=e}function A(t,e,a){const s=[];t.datasets=e.map(e=>{const n=t.datasets.find(t=>t[a]===e[a]);return n&&e.data&&!s.includes(n)?(s.push(n),Object.assign(n,e),n):{...e}})}function M(t,e){return t.getElementsAtEventForMode(e,"dataset",{intersect:!0},!1)}function K(t,e){return t.getElementsAtEventForMode(e,"nearest",{intersect:!0},!1)}function F(t,e){return t.getElementsAtEventForMode(e,"index",{intersect:!0},!1)}const I=i({props:x,setup(e,a){let{expose:s,slots:n}=a;const r=p(null),o=d(null);return s({chart:o}),y(()=>{if(!r.value)return;const{type:a,data:s,options:n,plugins:l,datasetIdKey:u}=e,i=function(t,e){const a={labels:[],datasets:[]};return S(a,t.labels),A(a,t.datasets,e),a}(s,u),d=function(t){return m(arguments.length>1&&void 0!==arguments[1]?arguments[1]:t)?new Proxy(t,{}):t}(i,s);o.value=new t(r.value,{type:a,data:d,options:{...n},plugins:l})}),f(()=>{const t=g(o.value);t&&(e.destroyDelay>0?setTimeout(()=>{t.destroy(),o.value=null},e.destroyDelay):(t.destroy(),o.value=null))}),b([()=>e.options,()=>e.data],(t,a)=>{let[s,n]=t,[r,l]=a;const u=g(o.value);if(!u)return;let i=!1;if(s){const t=E(s),e=E(r);t&&t!==e&&(function(t,e){const a=t.options;a&&e&&Object.assign(a,e)}(u,t),i=!0)}if(n){const t=E(n.labels),a=E(l.labels),s=E(n.datasets),r=E(l.datasets);t!==a&&(S(u.config.data,t),i=!0),s&&s!==r&&(A(u.config.data,s,e.datasetIdKey),i=!0)}i&&j(()=>{(t=>{t.update(e.updateMode)})(u)})},{deep:!0}),()=>c("canvas",{role:"img",ariaLabel:e.ariaLabel,ariaDescribedby:e.ariaDescribedby,ref:r},[c("p",{},[n.default?n.default():""])])}});function L(e,a){return t.register(a),i({props:h,setup(t,a){let{expose:s}=a;const n=d(null),r=t=>{n.value=t?.chart};return s({chart:n}),()=>c(I,D({ref:r},{type:e,...t}))}})}const q=L("bar",u),w=L("doughnut",a),N=L("line",s),P=L("pie",n),k=L("polarArea",r),C=L("radar",o),Q=L("bubble",e),T=L("scatter",l);export{q as Bar,Q as Bubble,I as Chart,w as Doughnut,N as Line,P as Pie,k as PolarArea,C as Radar,T as Scatter,L as createTypedChart,M as getDatasetAtEvent,K as getElementAtEvent,F as getElementsAtEvent};
